function setup(){print_text("balance","25pt Tahoma","red","LHS=RHS",10,40),bal.draw_base(),bal.draw_circle(),bal.draw_lever(0),timer=self.setInterval("repeating()",25),bal.place_cell(),new_question(),new_ts(),final_question()}function repeating(){var e,t;e=bal.target_angle,t=bal.angle,t<e&&(bal.angle++,clear_canvas(bal.canvas2),bal.draw_lever(bal.angle),clear_canvas(bal.canvas1),bal.draw_circle(),move_weights(bal.angle)),t==e&&(document.getElementById("leftmi").disabled=!1,document.getElementById("leftpl").disabled=!1,document.getElementById("rightmi").disabled=!1,document.getElementById("rightpl").disabled=!1),t>e&&(bal.angle--,clear_canvas(bal.canvas2),bal.draw_lever(bal.angle),clear_canvas(bal.canvas1),bal.draw_circle(),move_weights(bal.angle))}function copyright(e,t,a){var l,n,r=document.getElementById(e),o=r.getContext("2d"),s="Â©";l=Math.random(),n="copyright"+s+"2015 by Vinay Narayan, all rights reserved",l<.5?(o.font="10pt Tahoma",o.fillStyle="red",o.fillText("www.animated-mathematics.net",t,a)):(o.font="10pt Tahoma",o.fillStyle="red",o.fillText(n,t-100,a))}function move_weights(e){var t,a,l;for(l=0;l<=7;l++)for(t=bal.xocc[l],bal.xocc[l]=0,a=0;a<t;a++)bal.draw_brick(l,e)}function left_plus(){var e,t;t=bal.xtot_left(),t<=10&&(e=Math.round(3*Math.random()),bal.draw_brick(e,bal.angle),document.getElementById("leftpl").disabled=!0,gravity())}function right_plus(){var e,t;t=bal.xtot_right(),t<=10&&(e=Math.round(3*Math.random()+parseInt(4)),bal.draw_brick(e,bal.angle),document.getElementById("rightpl").disabled=!0,gravity())}function left_minus(){var e,t,a=0;if(t=bal.xtot_left(),t>0){for(;0===a;)e=Math.round(3*Math.random()),bal.xocc[e]>0&&(a=1);bal.clear_brick(e,bal.angle),document.getElementById("leftmi").disabled=!0,gravity()}}function right_minus(){var e,t,a=0;if(t=bal.xtot_right(),t>0){for(;0===a;)e=Math.round(3*Math.random()+parseInt(4)),bal.xocc[e]>0&&(a=1);bal.clear_brick(e,bal.angle),document.getElementById("rightmi").disabled=!0,gravity()}}function gravity(){var e,t;e=parseInt(bal.xtot_left()),t=parseInt(bal.xtot_right()),e===t&&(bal.target_angle=0),e<t&&(bal.target_angle=-30),e>t&&(bal.target_angle=30)}function new_question(){var e,t,a,l,n=50,r=[0,-1,-1,-1,-1,-1,-1,-1];for(document.getElementById("goldmi").disabled=!1,document.getElementById("goldpl").disabled=!1,bal1.draw_base(),bal1.draw_lever(0),bal1.place_cell(),clear_canvas(bal1.canvas1),clear_canvas(onestep.canvas),bal1.draw_circle(),bal1.breset(),t=bal1.cell_y,bal1.cell_y=300,bal1.draw_gbrick(8,0),bal1.cell_y=t,bal1.btext("=1g","red",435,315),bal1.master_add(1,r,0,1),e=Math.round(10*Math.random()+parseInt(4)),r=[4,5,6,7,-1,-1,-1,-1],bal1.master_add(2,r,0,e);n>=e;)n=Math.round(13*Math.random()+1);r=[2,3,-1,-1,-1,-1,-1,-1],bal1.master_add(2,r,0,n),a=bal1.gtot_right(),l=bal1.gtot_left(),onestep.c_left=[l,1],onestep.c_right=[a,1]}function gold_minus(){var e=[2,3,-1,-1,-1,-1,-1,-1];bal1.master_remove(2,e,0,1),e=[4,5,6,7,-1,-1,-1,-1],bal1.master_remove(2,e,0,1),check_balance()}function gold_plus(){var e=[2,3,-1,-1,-1,-1,-1,-1];bal1.master_add(2,e,0,1),e=[4,5,6,7,-1,-1,-1,-1],bal1.master_add(2,e,0,1)}function check_balance(){var e,t,a;e=bal1.gocc[0]+parseInt(bal1.gocc[1])+parseInt(bal1.gocc[2])+parseInt(bal1.gocc[3]),t=bal1.gocc[4]+parseInt(bal1.gocc[5])+parseInt(bal1.gocc[6])+parseInt(bal1.gocc[7]),0===e&&(a="Correct answer "+t+"g",bal1.btext(a,"red",10,310),document.getElementById("goldmi").disabled=!0,document.getElementById("goldpl").disabled=!0,working_out())}function working_out(){var e,t,a=[1,1,0,1],l=[1,1,1,1],n=[0,0,20,0],r=3;onestep.l_left=[1,1],onestep.l_right=[0,1],a[3]=onestep.c_right[0],t=a[3],a[1]=onestep.c_left[0],console.log(onestep.l_left,onestep.c_left,onestep.l_right,onestep.c_right),onestep.print_eqn(10,30),e=onestep.c_left[0],e*=-1,onestep.addition(e,0),onestep.print_step(10,60),onestep.print_eqn(10,90),onestep.text("substitute x value into original equation to check",10,120),a[0]=onestep.c_right[0],write_equation(onestep.canvas,a,l,n,10,150,r,onestep.col_eqn),n=[0,20,0],l=[1,1,1],a=[t,1,t],r=2,write_equation(onestep.canvas,a,l,n,10,180,r,onestep.col_eqn)}function new_ts(){var e,t,a,l=[0,-1,-1,-1,-1,-1,-1,-1],n=100;for(document.getElementById("pinkpl2").disabled=!1,document.getElementById("goldpl2").disabled=!1,document.getElementById("pinkmi2").disabled=!1,document.getElementById("goldmi2").disabled=!1,clear_canvas(twostep.canvas),bal2.draw_base(),bal2.draw_lever(0),bal2.place_cell(),clear_canvas(bal2.canvas1),bal2.draw_circle(),bal2.breset(),e=bal2.cell_y,bal2.cell_y=300,bal2.draw_gbrick(8,0),bal2.cell_y=e,bal2.btext("=1g","red",435,315),t=Math.round(7*Math.random()+parseInt(5)),twostep.l_left=[t,1],l=[0,1,-1,-1,-1,-1,-1,-1],bal2.master_add(1,l,0,t),t--,l=[4,5,-1,-1,-1,-1,-1,-1],bal2.master_add(1,l,0,t),twostep.l_right=[t,1],a=Math.round(10*Math.random()+parseInt(5));n>=a;)n=Math.round(10*Math.random()+parseInt(5));l=[2,3,-1,-1,-1,-1,-1,-1],bal2.master_add(2,l,0,n),l=[6,7,-1,-1,-1,-1,-1,-1],bal2.master_add(2,l,0,a),twostep.c_left=[n,1],twostep.c_right=[a,1]}function p_plus(){var e=[0,1,-1,-1,-1,-1,-1,-1];bal2.master_add(1,e,0,1),e=[4,5,-1,-1,-1,-1,-1,-1],bal2.master_add(1,e,0,1),done_yet()}function p_minus(){var e=[0,1,-1,-1,-1,-1,-1,-1];bal2.master_remove(1,e,0,1),e=[4,5,-1,-1,-1,-1,-1,-1],bal2.master_remove(1,e,0,1),done_yet()}function g_plus(){var e=[2,3,-1,-1,-1,-1,-1,-1];bal2.master_add(2,e,0,1),e=[6,7,-1,-1,-1,-1,-1,-1],bal2.master_add(2,e,0,1),done_yet()}function g_minus(){var e=[2,3,-1,-1,-1,-1,-1,-1];bal2.master_remove(2,e,0,1),e=[6,7,-1,-1,-1,-1,-1,-1],bal2.master_remove(2,e,0,1),done_yet()}function done_yet(){var e,t,a,l;e=bal2.gtot_left(),t=bal2.gtot_right(),a=bal2.xtot_right(),bal2.xtot_left(),document.getElementById("pinkmi2").disabled=0===a,document.getElementById("goldmi2").disabled=0===e,0===a&&0===e&&(document.getElementById("pinkpl2").disabled=!0,document.getElementById("goldpl2").disabled=!0,l="Correct answer "+t+"g",bal2.btext(l,"red",10,310),working_twostep())}function working_twostep(){var e,t,a,l,n,r=[1,1,1,1,1],o=[1,1,1,1,1],s=[0,0,20,0,0],c=4;r[1]=twostep.c_left[0],r[4]=twostep.c_right[0],t=twostep.l_left[0],a=twostep.l_right[0],twostep.print_eqn(10,30),e=twostep.c_left[0],e*=-1,twostep.addition(e,0),twostep.print_step(10,60),twostep.print_eqn(10,90),e=twostep.l_right[0],e*=-1,twostep.addition(e,1),twostep.print_step(10,120),twostep.print_eqn(10,150),l=twostep.c_right[0],r[0]=l*t,r[3]=l*a,n=r[0]+r[1],twostep.text("substitute x value into original equation to check",10,180),write_equation(twostep.canvas,r,o,s,10,210,c,twostep.col_eqn),r=[n,0,n],o=[1,1,1],s=[0,20,0],c=2,write_equation(twostep.canvas,r,o,s,10,240,c,twostep.col_eqn)}function final_question(){var e,t,a,l,n;document.getElementById("xin").disabled=!1,clear_canvas("question"),clear_canvas("tsex"),enter_x(xans),e=Math.round(10*Math.random()+parseInt(5)),tsq.l_left[0]=e,n=Math.random(),n>.5?(t=e+parseInt(1),tsq.l_right[0]=t):(t=e-parseInt(1),tsq.l_right[0]=t),a=Math.round(20*Math.random()+parseInt(5)),l=Math.round(20*Math.random()+parseInt(5)),tsq.c_left[0]=a,tsq.c_right[0]=l,tsq.print_eqn(10,30)}function final_working(){var e,t;document.getElementById("xin").disabled=!0,tsq.canvas="tsex",tsq.print_eqn(10,30),e=tsq.l_left[0]>tsq.l_right[0]?tsq.l_right[0]:tsq.l_left[0],e*=-1,tsq.addition(e,1),tsq.print_step(10,60),tsq.print_eqn(10,90),t=tsq.l_left[0]>0?tsq.c_left[0]:tsq.c_right[0],t*=-1,tsq.addition(t,0),tsq.print_step(10,120),tsq.print_eqn(10,150),copyright(tsq.canvas,250,160),tsq.canvas="question",tsq.l_left[0]>0?corans=tsq.c_right[0]:corans=tsq.c_left[0],corans==xans?print_text("qinput","16pt Tahoma","blue","Correct !!",100,60):print_text("qinput","16pt Tahoma","blue","Wrong !!",100,60)}function enter_x(e){var t;clear_canvas("qinput"),xans=parseInt(e),t="x="+xans,print_text("qinput","16pt Tahoma","blue",t,10,60)}var bal=new BalanceScale("level1","level2","level3",180,280),bal1=new BalanceScale("ex_level1","ex_level2","ex_level3",180,370);bal1.base_color="DarkTurquoise",bal1.pole_color="DarkTurquoise",bal1.circle_col="DarkRed";var lq=[0,1],ll=[1,1],lc=[0,1],rq=[0,1],rl=[0,1],rc=[0,1],onestep=new QuadAlgebra(lq,ll,lc,rq,rl,rc,"ost","blue","red"),bal2=new BalanceScale("ex2_lev1","ex2_lev2","ex2_lev3",180,370);bal2.base_color="DarkTurquoise",bal2.pole_color="DarkTurquoise",bal2.circle_col="DarkRed";var twostep=new QuadAlgebra(lq,ll,lc,rq,rl,rc,"twost","blue","red"),tsq=new QuadAlgebra(lq,ll,lc,rq,rl,rc,"question","blue","red"),xans=1;
function newarc(){let e=new Konva.Arc({x:275,y:250,innerRadius:0,outerRadius:220,angle:-30,fill:"",stroke:"blue",strokeWidth:2,clockwise:!0});return e}function myf(e,a,t){t[a]=new Image,t[a].src=sauce[a]}function mife(e,a,t){t[a]=new Image,t[a].src=ketchup[a]}function place_random(){function e(e,i,n){a=getRandomInt(30,500),t=getRandomInt(40,450),n[i].draggable(!0),n[i].to({duration:1,x:a,y:t})}var a,t;deg.forEach(e)}function getRandomInt(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e+1))+e}function degspoke(e,a,t){var i,n,r,o,g=e+offset[a];let s=newtext(e);r=Math.round(150*Math.cos(g*Math.PI/180)),o=Math.round(150*Math.sin(g*Math.PI/180)),i=250+r,n=250-o,s.x(i),s.y(n),layer.add(s)}function newtext(e){var a=e+"Â°",t=new Konva.Text({x:stage.width()/2,y:15,text:a,fontSize:20,fontFamily:"Calibri",fontStyle:"bold",fill:"red"});return t}function starting(){$("#clock").show(),$("#finish").show(),$("#start").hide(),$("#message").text("Press when you have finished"),place_random(),startDate=new Date}function ending(){function e(e,a,t){var i,n,r,o,g,s,c;s=t[a].x()+35,c=t[a].y()+20,i=250-t[a].y()-20,n=t[a].x()-275+35,r=180*Math.atan(i/n)/Math.PI,s<275&&c<250&&(r+=180),s<275&&c>250&&(r+=180),s>275&&c>250&&(r=360+r),console.log(ac[a],r),o=ac[a]+7,g=ac[a]-7,r>g&&r<o&&(score+=1)}var a;$("#finish").hide(),$("#correct").show(),$("#clock").hide(),$("#message").text("Press to see the right answer"),score=0,deg.forEach(e),console.log(score),endDate=new Date,a=Math.round((endDate-startDate)/1e3);var t="Score: "+score+" out of 12, time taken "+a+" seconds";$("#score").show(),$("#score").text(t)}function rightplace(){function e(e,a,t){var i,n,r,o;r=Math.round(260*Math.cos(ac[a]*Math.PI/180)),o=Math.round(260*Math.sin(ac[a]*Math.PI/180)),i=275+r-35,n=250-o-20,t[a].draggable(!1),t[a].to({duration:1,x:i,y:n})}$("#start").show(),$("#score").hide(),$("#correct").hide(),$("#message").text("Press start then drag the coordinates to the right place"),deg.forEach(e)}let stage=new Konva.Stage({height:500,width:550,container:"konva-holder"}),layer=new Konva.Layer;stage.add(layer);var circle=new Konva.Circle({x:275,y:250,radius:220,fill:"",stroke:"blue",strokeWidth:4}),east=new Konva.Text({x:500,y:240,text:"(1,0)",fontSize:20,fontFamily:"Calibri",fontStyle:"bold",fill:"black"}),north=east.clone();north.text("(0,1)"),north.x(250),north.y(5);var west=east.clone();west.x(5),west.text("(-1,0)");var south=north.clone();south.text("(0,-1)"),south.y(475),east.cache(),layer.add(east),north.cache(),layer.add(north),west.cache(),layer.add(west),south.cache(),layer.add(south);var i,ang=[30,45,60,90,120,135,150,180,210,225,240,270,300,315,330];for(i=0;i<ang.length;i++){let e=newarc();e.angle(-ang[i]),e.cache(),layer.add(e)}circle.cache(),layer.add(circle),layer.draw();var sauce=["images/deg30.gif","images/deg45.gif","images/deg60.gif","images/deg120.gif","images/deg135.gif","images/deg150.gif","images/deg210.gif","images/deg225.gif","images/deg240.gif","images/deg300.gif","images/deg315.gif","images/deg330.gif"],imageObj=[0,0,0,0,0,0,0,0,0,0,0,0],deg=[0,0,0,0,0,0,0,0,0,0,0,0],ketchup=["images/pi0.gif","images/pi6.gif","images/pi4.gif","images/pi3.gif","images/pi2.gif","images/pi23.gif","images/pi34.gif","images/pi56.gif","images/pi.gif","images/pi76.gif","images/pi54.gif","images/pi43.gif","images/pi32.gif","images/pi53.gif","images/pi74.gif","images/pi116.gif","images/pitwo.gif"],piObj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rad=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330,360],sps=[200,220,220,220,210,200,200,195,180,175,175,175,185,190,190,200,200],rsize=[[8,10],[9,27],[9,27],[9,27],[9,27],[17,30],[17,30],[17,30],[12,9],[17,30],[17,30],[17,30],[17,30],[17,30],[17,30],[21,30],[16,11]];imageObj.forEach(myf),piObj.forEach(mife),window.onload=function(){function e(e,a,t){var i,n;i=getRandomInt(30,500),n=getRandomInt(40,450),deg[a]=new Konva.Image({x:i,y:n,image:imageObj[a],width:50,height:41,draggable:!1}),layer.add(deg[a]),deg[a].cache()}function a(e,a,t){var i,n,r,o,g=e+offset[a];r=Math.round(sps[a]*Math.cos(g*Math.PI/180)),o=Math.round(sps[a]*Math.sin(g*Math.PI/180)),i=250+r,n=250-o,rad[a]=new Konva.Image({x:i,y:n,image:piObj[a],width:rsize[a][0],height:rsize[a][1],draggable:!1}),layer.add(rad[a]),rad[a].cache()}deg.forEach(e),rad.forEach(a),layer.draw()};var anglab=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330,360],offset=[7,5,5,5,-10,-12,-10,-10,-7,-5,-5,-5,10,11,11,10,-2];anglab.forEach(degspoke),layer.draw(),$("#clock").hide(),$("#finish").hide(),$("#correct").hide(),$("#score").hide(),$("#start").on("click",starting),$("#finish").on("click",ending);var startDate,endDate,ac=[30,45,60,120,135,150,210,225,240,300,315,330],score=0;$("#correct").on("click",rightplace);
function setup(){screen.scale(-5,5,-5,20),screen1.scale(-5,5,-5,20),screen1.clear(),screen.quadratic(1,0,0,3,"purple",-5,5),tangent(1),screenx.scale(-5,5,-5,20),screenx1.scale(-5,5,-5,20),screenx1.clear(),screenx.quadratic(1,0,0,3,"purple",-5,5),secant(),solstep(),limstep(),screenz.scale(-5,5,-5,20),screenz1.scale(-5,5,-5,20),screenz1.clear(),screenz.quadratic(1,0,0,3,"purple",-5,5),seclast(),screens.scale(-5,5,-5,20),screens1.scale(-5,5,-5,20),screens1.clear(),screens.quadratic(1,0,0,3,"purple",-5,5),example()}function tangent(e){var l=[0,0];xv=parseFloat(e),m=2*xv,c=xv*xv-m*xv,screen1.clear(),screen1.generic(3,"red",mxplusc,-5,5),screen1.rawprint("f(x)=x"+ptwo,50,50,"left","purple","Italic 40px Ariel"),l=pmap(xv,xv*xv,-5,5,-5,20,500,500),l=pmap(xv,xv*xv-1,-5,5,-5,20,500,500),screen1.rawprint("m="+m,l[0],l[1],"left","red","Normal 30px Ariel"),screen1.line(4,"green",e,0,e,e*e),screen1.line(4,"green",0,e*e,e,e*e)}function seclast(){var e;screenz1.clear(),mz=(bc*bc-ac*ac)/(bc-ac),cz=ac*ac-mz*ac,screenz1.generic(3,"red",seclinez,-5,5),screenz1.print("A",ac-.2,ac*ac+1,"Bold 30px Ariel","black"),screenz1.print("B",bc-.2,bc*bc+1,"Vold 30px Ariel","black"),screenz1.line(4,"black",ac,ac*ac,bc,ac*ac),screenz1.line(4,"black",bc,ac*ac,bc,bc*bc),e=ac+(bc-ac)/2,screenz1.print("h",e,.2,"Bold 30px Ariel","red"),1==aniswitch&&(bc-=.1,bc<=ac&&(bc=ac+1e-4,aniswitch=0),requestAnimFrame(seclast))}function takelimit(){aniswitch=1,seclast()}function reslim(){bc=4,aniswitch=0,seclast()}function secant(){var e,l,t,r=[0,0],a=[0,0];screenx1.clear(),l=h/2**hcut,e=xa+l,ms=(e*e-xa*xa)/l,cs=xa*xa-ms*xa,screenx1.generic(3,"green",secline,-5,5),r=pmap(xa,xa*xa+4,-5,5,-5,20,500,500),screenx1.rawprint("m="+ms,r[0],r[1],"left","black","Bold 20px Arial"),screenx1.print("A",xa-.2,xa*xa+1,"Bold 20px Ariel","red"),screenx1.print("B",e-.2,e*e+1,"Bold 20px Ariel","red"),screenx1.line(3,"red",xa,xa*xa,e,xa*xa),screenx1.line(3,"red",e,xa*xa,e,e*e),t=xa+l/2,screenx1.print(delta+"x",t,xa*xa-.5,"Bold 20px Ariel","black"),t=xa*xa+(e*e-xa*xa)/2,screenx1.print(delta+"y",e+.3,t,"Bold 20px Ariel","black"),a=equation.text_left("m=",100,100,"Normal",30,"Ariel","black"),a=equation.frac_left(delta+"y",delta+"x",a[2],a[0]-15,"Normal",20,"Ariel","black"),screenx1.rawprint("f(x)=x"+ptwo,50,50,"left","purple","Italic 30px Ariel")}function halve(){hcut+=1,secant()}function double(){hcut-=1,hcut<0&&(hcut=0),secant()}function aminus(){hcut=0,xa-=.2,secant(),step=1,lim.clear(),solstep()}function aplus(){hcut=0,xa+=.2,secant(),step=1,lim.clear(),solstep()}function solstep(){var e,l,t,r,a,i,n=[0,0,0];xa=Math.round(10*xa)/10,r=xa*xa,a=2*xa,r=Math.round(100*r)/100,a=Math.round(100*a)/100,1===step&&(lim.print(10,30,"The gradient m equals the rise over run","Normal 20px Ariel","left","blue"),lim.print(10,70,"m=","Normal 20px Ariel","left","black"),n=lim.frac_left(delta+"y",delta+"x",40,55,"Normal",20,"Ariel","black"),t="h"+limit+"0",lim.text_left(t,n[2]+15,n[0]+20,"Normal",15,"Ariel","red"),n=lim.text_left("=lim",n[2]+5,n[0],"Normal",20,"Ariel","black"),e="f("+xa+"+h)-f("+xa+")",l=xa+"+h-"+xa,n=lim.frac_left(e,l,n[2]+3,n[0]-12,"Normal",20,"Ariel","black"),lim.print(n[2]+5,n[0],"limit means B is moved to A","Normal 20px Ariel","left","red")),2===step&&(e="("+xa+"+h)"+ptwo+"-",e=xa>=0?e+xa+ptwo:e+"("+xa+")"+ptwo,l="h",lim.limit("m","h"+limit+"0",e,l,150,130,"Normal",20,"Ariel","black"),lim.print(230,140,"expanding brackets","Normal 20px Ariel","left","blue")),3===step&&(l="h",a>0&&(e=r+"+"+a+"h+h"+ptwo+"-"+r),a<0&&(e=r+""+a+"h+h"+ptwo+"-"+r),0==a&&(e="h"+ptwo),lim.limit("m","h"+limit+"0",e,l,150,180,"Normal",20,"Ariel","black"),lim.print(240,190,"simplifying the numerator","Normal 20px Ariel","left","blue")),4===step&&(l="h",e=0==xa?"h"+ptwo:a+"h+h"+ptwo,lim.limit("m","h"+limit+"0",e,l,150,230,"Normal",20,"Ariel","black")),5==step&&(lim.print(10,290,"substituting h=0 gives","Normal 20px Ariel","left","blue"),n=lim.text_left("m=",200,290,"Normal",20,"Ariel","black"),n=lim.frac_left("0","0",n[2]+5,n[0]-15,"Normal",20,"Ariel","black"),lim.text_left("an indeterminate form",n[2]+10,n[0],"Normal",20,"Ariel","blue"),lim.text_left("so must simplify before setting h=0:",10,330,"Normal",20,"Ariel","blue")),6==step&&(e="m=lim "+a+"+h",e=0==xa?"h":"m=lim "+a+"+h",lim.text_left(e,40,360,"Normal",20,"Ariel","black"),lim.text_left("h"+limit+"0",60,375,"Normal",15,"Ariel","red"),e="m="+a,lim.text_left(e,40,400,"Normal",20,"Ariel","black"),lim.text_left("usually",10,430,"Normal",20,"Ariel","blue"),e="m=f"+prime+"("+xa+")",i=e,n=lim.text_left(e,75,430,"Normal",20,"Ariel","black"),e="pronounced f dash of "+xa,lim.text_left(e,n[2]+10,n[0],"Normal",20,"Ariel","blue"),i="f"+prime+"("+xa+")",i=i+"="+a,n=lim.text_left("final answer",10,470,"Normal",20,"Ariel","red"),lim.text_left(i,n[2]+10,n[0],"Normal",20,"Ariel","black")),step+=1}function limstep(){var e,l,t,r,a;r="f"+prime+"(x)",a="h"+limit+"0",1==xstep&&(e="note f"+prime+"(x) is the gradient of the secant line",kerela.text_left(e,10,30,"Normal",20,"Ariel","blue"),l="f(x+h)-f(x)",t="x+h-x",kerela.limit(r,a,l,t,140,60,"Normal",20,"Ariel","black")),2==xstep&&(e="simplifying denominator and numerator in terms of x and h",kerela.text_left(e,10,110,"Normal",20,"Ariel","blue"),t="h",l="(x+h)"+ptwo+"-x"+ptwo,kerela.limit(r,a,l,t,130,140,"Normal",20,"Ariel","black")),3==xstep&&(e="expanding the bracket",kerela.text_left(e,200,150,"Normal",20,"Ariel","blue"),l="x"+ptwo+"+2hx+h"+ptwo+"-x"+ptwo,t="h",kerela.limit(r,a,l,t,150,190,"Normal",20,"Ariel","black")),4==xstep&&(e="cancelling the x"+ptwo,kerela.text_left(e,230,200,"Normal",20,"Ariel","blue"),l="2hx+h"+ptwo,t="h",kerela.limit(r,a,l,t,125,240,"Normal",20,"Ariel","black")),5==xstep&&(e="dividing numerator terms by h",kerela.text_left(e,10,290,"Normal",20,"Ariel","blue"),e=r+"=lim 2x+h",kerela.text_left(e,10,320,"Normal",20,"Ariel","black"),e=a,kerela.text_left(e,57,335,"Normal",12,"Ariel","black")),6==xstep&&(e="taking the limit by setting h=0",kerela.text_left(e,10,365,"Normal",20,"Ariel","blue"),e=r+"=2x",kerela.text_left(e,10,395,"Normal",20,"Ariel","black"),e="Final Answer",kerela.text_left(e,100,395,"Normal",20,"Ariel","red")),xstep+=1}function reset(){xstep=1,kerela.clear(),limstep()}function example(){for(var e=0;0==e;)e=RandomInt(-4,4);xpoint=e,e*=e,txt="("+xpoint+","+e+")",document.getElementById("coord").innerHTML=txt,screens1.clear(),screens1.point(6,"red",xpoint,e),answer.clear(),sstep=1}function estep(){var e,l,t;l=xpoint,xqs=l*l;var r=function(e){return 2*xpoint*e+t};1==sstep&&(e="the tangent line has the form",answer.text_left(e,10,30,"Normal",20,"Ariel","blue"),e="y=mx+c",answer.text_left(e,10,60,"Normal",20,"Ariel","black"),e="m is the gradient and c is the y intercept",answer.text_left(e,10,90,"Normal",20,"Ariel","blue")),2==sstep&&(e="m=f"+prime+"("+xpoint+")="+2*xpoint,answer.text_left(e,10,120,"Normal",20,"Ariel","black"),e="therefore",answer.text_left(e,120,120,"Normal",20,"Ariel","blue"),e="y="+2*xpoint+"x+c",answer.text_left(e,10,150,"Normal",20,"Ariel","black")),3==sstep&&(e="the line passes through point ("+xpoint+","+xpoint*xpoint+")",answer.text_left(e,10,180,"Normal",20,"Ariel","blue"),e="can sub x="+xpoint+" and y="+xpoint*xpoint+" to find c",answer.text_left(e,10,210,"Normal",20,"Ariel","blue"),e=xqs+"="+2*l*l+"+c",answer.text_left(e,10,240,"Normal",20,"Ariel","black")),4==sstep&&(t=xqs-2*l*l,e="c="+t,answer.text_left(e,10,270,"Normal",20,"Ariel","black"),e="final answer",answer.text_left(e,10,300,"Normal",20,"Ariel","red"),e="y="+2*l+"x"+t,answer.text_left(e,130,300,"Normal",20,"Ariel","black"),e="line is graphed as a check",answer.text_left(e,10,330,"Normal",20,"Ariel","blue"),screens1.generic(3,"red",r,-5,5)),sstep+=1}var m,c,ptwo="²",delta="Δ",prime="′",screen=new Graphics("layer","layer1","dummy1","dummy1",500,500,500,500),screen1=new Graphics("dummy1","dummy1","dummy1","dummy1",500,500,500,500),circle=new Round("dummy1");m=1,c=1;var mxplusc=function(e){return m*e+c},xv=1,screenx=new Graphics("layerx","layerx1","dummyx1","dummyx1",500,500,500,500),screenx1=new Graphics("dummyx1","dummyx1","dummyx1","dummyx1",500,500,500,500),xa=1,h=3,hcut=0,ms=1,cs=1,equation=new Ekvation("dummyx1"),secline=function(e){return ms*e+cs},lim=new Ekvation("layerxx"),step=1,kerela=new Ekvation("layerzz"),xstep=1,screenz=new Graphics("layerz","layerz1","dummyz1","dummyz1",500,500,500,500),screenz1=new Graphics("dummyz1","dummyz1","dummyz1","dummyz1",500,500,500,500),ac=1,bc=4,mz=1,cz=1,seclinez=function(e){return mz*e+cz};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var aniswitch=0,xpoint=1,sstep=1,screens=new Graphics("layere","layere1","dummye1","dummye1",250,250,250,250),screens1=new Graphics("dummye1","dummye1","dummye1","dummye1",250,250,250,250),answer=new Ekvation("dummys1");